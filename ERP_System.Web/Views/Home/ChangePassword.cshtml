@model ChangePasswordDTO


<form id="frmEdit" onsubmit="Submit()">


    <div class="row page-titles mx-0">
        <div class="col-12 p-0 m-0">
            <div class="d-flex  justify-content-between align-items-center">
                <h4 class="PageTitle">
                    تغيير كلمة المرور
                </h4>
                <div class="d-flex justify-content-between align-items-center gap-2">

                    <a class="SaveBtn" onclick="saveNewPass()" >
                        <div class="d-flex align-items-center m-0">
                            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="15" height="15" x="0" y="0" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M420.284 0H60C26.916 0 0 26.916 0 60v392c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V91.716zM157 40h119v76h40V40h40v96c0 11.028-8.972 20-20 20H177c-11.028 0-20-8.972-20-20zm239 432H117V296c0-11.028 8.972-20 20-20h239c11.028 0 20 8.972 20 20zm76-20c0 11.028-8.972 20-20 20h-16V296c0-33.084-26.916-60-60-60H137c-33.084 0-60 26.916-60 60v176H60c-11.028 0-20-8.972-20-20V60c0-11.028 8.972-20 20-20h57v96c0 33.084 26.916 60 60 60h159c33.084 0 60-26.916 60-60V40h7.716L472 108.284z" fill="#000000" data-original="#000000" class=""></path></g></svg>                            حفظ
                        </div>


                    </a>


                </div>
            </div>
        </div>
        <div class=" col-12  m-0  CardDiv my-2">
            <input hidden name="id" id="id" value="" />
            <div class="w-100 d-flex flex-wrap align-items-end   mt-3 gap-3">


                <div class="form-group  min-w-3">
                    <label class="lable">كلمة المرور الحالية  </label>

                    <input id="OldPassword" required name="OldPassword" type="password" class="form-control " />
                    <span asp-validation-for="OldPassword"></span>

                </div>

                <div class="form-group  min-w-3">
                    <label class="lable">  كلمة المرور الجديدة  </label>

                    <input id="NewPassword" required name="NewPassword" type="password" class="form-control " />
                    <span asp-validation-for="NewPassword"></span>

                </div>

                <div class="form-group  min-w-3">
                    <label class="lable"> تاكيد كلمة المرور الجديدة  </label>

                    <input id="ConfirmNewPassword" required name="ConfirmNewPassword" type="password" class="form-control " />
                    <span asp-validation-for="ConfirmNewPassword"></span>

                </div>


            </div>
        </div>
    </div>
</form>

@section Scripts{
    <script>

    function saveNewPass() {
        let frmEdit = $("#frmEdit");
        if (frmEdit.valid() == true) {

               $.post('@Url.GetAction("ChangeOldPassword")', frmEdit.serialize(), function (res) {

                   if (res.status) {
                       window.alert("تم تغيير كلمة المرور بنجاح");
                        window.location.href = "@Url.GetAction("Index")";
                    }
                    else {
                       window.alert("خطأ في تغيير كلمة المرور");
                    }
                });
        }


    }
    </script>
}